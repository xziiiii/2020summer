## 前台管理子系统接口文档

###  服务器信息

- IP：   119.3.179.137
- 端口：8080



### 注册

- 接口：/customer/register

- 接收参数：user_id由后台生成并返回，通过此方式注册，该用户的角色会被设置为“商家”，即role_id=2

  - username
  - password

- 返回值：

  - 成功

  ```json
  {
      "code": 1,
      "message": "success",
      "data": {
          "user_id": 300684
      }
  }
  ```

  - 失败

  ```json
  {
      "code": 0,
      "message": "fail",
      "data": {}
  }
  ```



### 登录

​	登录时后台会判断该用户的角色是否为“用户”，如果不是则登陆失败

- 接口：/customer/login

- 接收参数：

  - user_id
  - password

- 返回值：

  - 成功

  ```json
  {
      "code": 1,
      "message": "success",
      "data": {}
  }
  ```

  - 失败

  ```json
  {
      "code": 0,
      "message": "fail",
      "data": {}
  }
  ```



### 获取图书类别列表

​	因为图书的类别就几个，就不设置区间了，其中cate_id代表类别的id

- 接口：/book/getBookCategoryList

- 接收参数：

- 返回值：

  - 成功

  ```json
  {
      "code": 1,
      "message": "success",
      "data": {
          "category_list": [
              {
                  "cate_id": 1,
                  "parent_id": 0,
                  "name": "哲学宗教类",
                  "status": 1,
                  "sort_order": 1,
                  "is_parent": 0,
                  "created": "2019-05-18T23:03:06.000+00:00",
                  "updated": "2019-05-18T23:03:11.000+00:00"
              },
              {
                  "cate_id": 2,
                  "parent_id": 0,
                  "name": "科学类",
                  "status": 1,
                  "sort_order": 1,
                  "is_parent": 0,
                  "created": "2018-11-01T14:43:46.000+00:00",
                  "updated": "2018-11-01T14:43:49.000+00:00"
              },
              {
                  "cate_id": 3,
                  "parent_id": 0,
                  "name": "政治法律类",
                  "status": 1,
                  "sort_order": 1,
                  "is_parent": 0,
                  "created": "2018-11-01T14:46:08.000+00:00",
                  "updated": "2018-11-01T14:46:11.000+00:00"
              },
              {
                  "cate_id": 4,
                  "parent_id": 0,
                  "name": "军事类",
                  "status": 1,
                  "sort_order": 1,
                  "is_parent": 0,
                  "created": "2018-11-01T14:46:33.000+00:00",
                  "updated": "2018-11-01T14:46:35.000+00:00"
              },
              {
                  "cate_id": 5,
                  "parent_id": 0,
                  "name": "经济类",
                  "status": 1,
                  "sort_order": 1,
                  "is_parent": 0,
                  "created": "2018-11-01T14:47:09.000+00:00",
                  "updated": "2018-11-01T14:47:12.000+00:00"
              },
              {
                  "cate_id": 6,
                  "parent_id": 0,
                  "name": "文化教育体育类",
                  "status": 1,
                  "sort_order": 1,
                  "is_parent": 0,
                  "created": "2018-11-01T14:47:44.000+00:00",
                  "updated": "2018-11-01T14:47:48.000+00:00"
              },
              {
                  "cate_id": 7,
                  "parent_id": 0,
                  "name": "历史类",
                  "status": 1,
                  "sort_order": 1,
                  "is_parent": 0,
                  "created": "2018-11-01T20:50:56.000+00:00",
                  "updated": "2018-11-01T20:50:58.000+00:00"
              },
              {
                  "cate_id": 8,
                  "parent_id": 0,
                  "name": "医药卫生类",
                  "status": 1,
                  "sort_order": 1,
                  "is_parent": 0,
                  "created": "2019-05-18T23:07:40.000+00:00",
                  "updated": "2019-05-18T23:07:43.000+00:00"
              }
          ],
          "list_size": 8
      }
  }
  ```

  - 失败

  ```json
  {
      "code": 0,
      "message": "fail",
      "data": {}
  }
  ```



### 根据类别获取图书列表

- 接口：/book/getCategoryBookListWithLimit

- 接收参数：

  - cate_id：类别id
  - left
  - right

- 返回值：

  - 成功

  ```json
  {
      "code": 1,
      "message": "success",
      "data": {
          "book_list": [
              {
                  "book_id": 255755,
                  "book_category_id": 1,
                  "store_id": 1,
                  "name": "Come Through Marjorie's Garden Gate: Spend a Year in the Bestselling Author's Amazing Garden",
                  "outline": null,
                  "detail": null,
                  "press": "HarperCollins Publishers",
                  "publish_date": "0127-03-01 00:00:00",
                  "size": null,
                  "version": null,
                  "author": "Marjorie Harris",
                  "translator": "http://images.amazon.com/images/P/000255755X.01.LZZZZZZZ.jpg",
                  "isbn": null,
                  "price": 121.0,
                  "pages": 0,
                  "catalog": "http://images.amazon.com/images/P/000255755X.01.THUMBZZZ.jpg",
                  "market_price": 0.0,
                  "member_price": 0.0,
                  "deal_mount": 0,
                  "look_mount": 83,
                  "discount": 0.0,
                  "image_url": "http://images.amazon.com/images/P/000255755X.01.MZZZZZZZ.jpg",
                  "store_mount": 200,
                  "store_time": null,
                  "pack_style": null,
                  "is_shelf": 1,
                  "cname": "Philosophy Religion",
                  "description": "No content",
                  "cata": "No content",
                  "content": "No content"
              },
              {
                  "book_id": 651202,
                  "book_category_id": 1,
                  "store_id": 1,
                  "name": "A Small Death in Lisbon",
                  "outline": null,
                  "detail": null,
                  "press": "HarperCollins",
                  "publish_date": "0119-12-01 00:00:00",
                  "size": null,
                  "version": null,
                  "author": "Robert Wilson",
                  "translator": "http://images.amazon.com/images/P/000651202X.01.LZZZZZZZ.jpg",
                  "isbn": null,
                  "price": 74.0,
                  "pages": 0,
                  "catalog": "http://images.amazon.com/images/P/000651202X.01.THUMBZZZ.jpg",
                  "market_price": 0.0,
                  "member_price": 0.0,
                  "deal_mount": 0,
                  "look_mount": 23,
                  "discount": 0.0,
                  "image_url": "http://images.amazon.com/images/P/000651202X.01.MZZZZZZZ.jpg",
                  "store_mount": 200,
                  "store_time": null,
                  "pack_style": null,
                  "is_shelf": 1,
                  "cname": "Philosophy Religion",
                  "description": "No content",
                  "cata": "No content",
                  "content": "No content"
              },
              {
                  "book_id": 710331,
                  "book_category_id": 1,
                  "store_id": 1,
                  "name": "Tarot",
                  "outline": null,
                  "detail": null,
                  "press": "Thorsons Publishers",
                  "publish_date": "0120-01-01 00:00:00",
                  "size": null,
                  "version": null,
                  "author": "Evelyne Donaldson",
                  "translator": "http://images.amazon.com/images/P/000710331X.01.LZZZZZZZ.jpg",
                  "isbn": null,
                  "price": 181.0,
                  "pages": 0,
                  "catalog": "http://images.amazon.com/images/P/000710331X.01.THUMBZZZ.jpg",
                  "market_price": 0.0,
                  "member_price": 0.0,
                  "deal_mount": 0,
                  "look_mount": 30,
                  "discount": 0.0,
                  "image_url": "http://images.amazon.com/images/P/000710331X.01.MZZZZZZZ.jpg",
                  "store_mount": 200,
                  "store_time": null,
                  "pack_style": null,
                  "is_shelf": 1,
                  "cname": "Philosophy Religion",
                  "description": "No content",
                  "cata": "No content",
                  "content": "No content"
              }
          ],
          "list_size": 3
      }
  }
  ```

  - 失败

  ```json
  {
      "code": 0,
      "message": "fail",
      "data": {}
  }
  ```



### 关键字查询图书列表

​	关键字会在图书名称和作者上匹配

- 接口：/book/getBookListByKeywordWithLimit

- 接收参数：

  - keyword:
  - left
  - right

- 返回值：

  - 成功

  ```json
  {
      "code": 1,
      "message": "success",
      "data": {
          "book_list": [
              {
                  "book_id": 5,
                  "book_category_id": 2,
                  "store_id": 1,
                  "name": "Java从入门到精通（第4版）（附光盘）",
                  "outline": "Java从入门到精通（第4版）（附光盘）畅销书全新改版 累计63次重印 30万读者选择的 java入门经典书 持续八年畅销 全行业优秀畅销书 长期位居java 销售排行榜前列 好学、好用 32小时视频 732个经典实例 369项,",
                  "detail": "随书附赠小白手册（电子版） 下载链接 http://pan.baidu.com/s/1mhLe8GS 软件开发视频大讲堂 丛书系清华社 视频大讲堂 重点大系之一。该大系包括多个子系列，每个子系列的图书在其同品种的图书中销售名列前茅，其中： 4个品种荣获 全行业优秀畅销品种 1个品种荣获2012年清华大学出版社 专业畅销书 一等奖 绝大多数品种在 全国计算机零售图书排行榜 同品种排行中名列前茅 截至目前该大系累计销售超过130万册 该大系已成为近年来清华社计算机专业基础类零售图书*畅销的品牌之一 软件开发视频大讲堂 系列作为清华社 视频大讲堂 大系的子系列之一，继承和创新了清华社 视频大讲堂 大系的编写模式、写作风格和优良品质。本书突出了以下内容： 总长总时长32小时同步视频演示讲解，可反复观摩，让学习更为快捷",
                  "press": "清华大学出版社",
                  "publish_date": "2016-09-21 00:00:00",
                  "size": "16开",
                  "version": null,
                  "author": "明日科技",
                  "translator": null,
                  "isbn": "9787302444541",
                  "price": 61.2,
                  "pages": 0,
                  "catalog": "",
                  "market_price": 69.6,
                  "member_price": 0.0,
                  "deal_mount": 100,
                  "look_mount": 146,
                  "discount": 8.8,
                  "image_url": "http://img3m0.ddimg.cn/60/17/24042210-1_b_5.jpg",
                  "store_mount": 200,
                  "store_time": "2018-11-01T19:58:45.000+00:00",
                  "pack_style": "平装-胶订",
                  "is_shelf": 1,
                  "cname": "",
                  "description": "",
                  "cata": "",
                  "content": ""
              },
              {
                  "book_id": 10,
                  "book_category_id": 2,
                  "store_id": 1,
                  "name": "Java核心技术 卷I：基础知识（原书第10版）",
                  "outline": "Java核心技术 卷I：基础知识（原书第10版）全新第10版！Java领域极具影响力和价值的著作之一，与《Java编程思想》齐名，10余年全球畅销不衰，广受好评",
                  "detail": "Java领域*有影响力和价值的著作之一，与《Java编程思想》齐名，10余年全球畅销不衰，广受好评 根据Java SE 8全面更新，系统全面讲解Java语言的核心概念、语法、重要特性和开发方法，包含大量案例，实践性强 ?? 一直以来，《Java核心技术》都被认为是面向高级程序员的经典教程和参考书，它内容翔实、客观准确，不拖泥带水，是想为实际应用编写健壮 Java代码的程序员的*选。如今，本版进行了全面更新， 以反映近年来人们翘首以待、变革*大的Java版本（Java SE 8）的内容。这一版经过重写，并重新组织，全面阐释了新的Java SE 8特性、惯用法和*佳实践，其中包含数百个示例程序，所有这些代码都经过精心设计，不仅易于理解，也很容易实际应用。 本书为专业程序员解决实际问题而写，可以帮助你深入了解Java语言和库。在卷I中，Horstmann主要强调",
                  "press": "机械工业出版社",
                  "publish_date": "2016-09-19 00:00:00",
                  "size": "16开",
                  "version": null,
                  "author": "（美）凯 S.霍斯特曼（Cay S. Horstmann）",
                  "translator": null,
                  "isbn": "9787111547426",
                  "price": 109.8,
                  "pages": 0,
                  "catalog": "",
                  "market_price": 119.0,
                  "member_price": 0.0,
                  "deal_mount": 800,
                  "look_mount": 563,
                  "discount": 9.23,
                  "image_url": "http://img3m6.ddimg.cn/86/32/24035306-1_b_6.jpg",
                  "store_mount": 200,
                  "store_time": "2018-11-01T19:58:48.000+00:00",
                  "pack_style": "平装-胶订",
                  "is_shelf": 1,
                  "cname": "",
                  "description": "",
                  "cata": "",
                  "content": ""
              },
              {
                  "book_id": 18,
                  "book_category_id": 2,
                  "store_id": 1,
                  "name": "Effective Java中文版(第2版)",
                  "outline": "Effective Java中文版(第2版)",
                  "detail": "相关阅读 Effective Python：编写高质量Python代码的59个有效方法 Effective Ruby：改善Ruby程序的48条建议 我很希望10年前就拥有这本书。可能有人认为我不需要任何Java方面的书籍，但是我需要这本书。 Java之父James Gosling 编码平添乐趣，程序更加完美，高效成为习惯，工作如此轻松。 你是否正在寻找一本能够更加深入地了解Java编程语言的书，以便编写出更清晰、更正确、更健壮且更易于重用的代码。不用找了！本书为我们带来了共78条程序员必备的经验法则，针对你每天都会遇到的编程问题提出了*有效、*实用的解决方案。 这本经典Jolt获奖作品实属众望所归。作者对新版进行了彻底的更新。涵盖了自第l版之后所引入的Java E5和Java SE 6的特性，同时开发了新的设计模式和语言习惯用法，介绍了如何充分利用从泛型到枚举、从注解到自",
                  "press": "机械工业出版社",
                  "publish_date": "2010-09-01 00:00:00",
                  "size": "16开",
                  "version": null,
                  "author": "(美)布洛克|译者:杨春花//俞黎敏",
                  "translator": null,
                  "isbn": "9787111255833",
                  "price": 48.0,
                  "pages": 0,
                  "catalog": "",
                  "market_price": 52.0,
                  "member_price": 0.0,
                  "deal_mount": 100,
                  "look_mount": 102,
                  "discount": 9.24,
                  "image_url": "http://img3m1.ddimg.cn/48/15/20459091-1_b_0.jpg",
                  "store_mount": 200,
                  "store_time": "2018-11-01T19:58:53.000+00:00",
                  "pack_style": "平装",
                  "is_shelf": 1,
                  "cname": "",
                  "description": "",
                  "cata": "",
                  "content": ""
              }
          ],
          "list_size": 3
      }
  }
  ```

  - 失败

  ```json
  {
      "code": 0,
      "message": "fail",
      "data": {}
  }
  ```



### 查看某个商店的图书列表

​	与店铺管理子系统一样中查看商店图书列表一样

- 接口：/book/getStoreBookListWithLimit

- 参数：

  - store_id
  - left
  - right

- 返回值：

  - 成功：

  ```json
  {
      "code": 1,
      "message": "success",
      "data": {
          "book_list": [
              {
                "book_id": 2,
                  "book_category_id": 2,
                "store_id": 1,
                  "name": "深入理解Java虚拟机：JVM高级特性与最佳实践（第2版）",
                  "outline": "深入理解Java虚拟机：JVM高级特性与最佳实践（第2版）超级畅销书全新升级，第1版两年内印刷近10次，Java图书领域公认的经典著作，繁体版台湾发行",
                  "detail": "本书第1版两年内印刷近10次，4家网上书店的评论近4?000条，98%以上的评论全部为5星级的好评，是整个Java图书领域公认的经典著作和超级畅销书，繁体版在台湾也十分受欢迎。第2版在第1版的基础上做了很大的改进：根据*的JDK 1.7对全书内容进行了全面的升级和补充；增加了大量处理各种常见JVM问题的技巧和*实践；增加了若干与生产环境相结合的实战案例；对第1版中的错误和不足之处的修正；等等。第2版不仅技术更新、内容更丰富，而且实战性更强。",
                  "press": "机械工业出版社",
                  "publish_date": "2013-06-01 00:00:00",
                  "size": "16开",
                  "version": null,
                  "author": "周志明",
                  "translator": null,
                  "isbn": "9787111421900",
                  "price": 72.9,
                  "pages": 0,
                  "catalog": "",
                  "market_price": 79.0,
                  "member_price": 0.0,
                  "deal_mount": 300,
                  "look_mount": 390,
                  "discount": 9.2,
                  "image_url": "http://img3m1.ddimg.cn/77/14/23259731-1_b_0.jpg",
                  "store_mount": 200,
                  "store_time": "2018-11-01T19:58:44.000+00:00",
                  "pack_style": "平装-胶订",
                  "is_shelf": 1,
                  "cname": "",
                  "description": "",
                  "cata": "",
                  "content": ""
              },
              {
                  "book_id": 3,
                  "book_category_id": 2,
                  "store_id": 1,
                  "name": "C Primer Plus 第6版 中文版 C语言入门经典教程",
                  "outline": "C Primer Plus 第6版 中文版 C语言入门经典教程畅销30余年的C语言编程入门教程 近百万程序员的C语言编程启蒙教程 技术大牛案头常备的工具书 针对C11标准库更新 蔡学镛 孟岩 高博倾力推荐",
                  "detail": "经久不衰的C语言畅销经典教程针对C11标准进行全面更新《C Primer Plus（第6版）中文版》是一本经过仔细测试、精心设计的完整C语言教程，它涵盖了C语言编程中的核心内容。《C Primer Plus（第6版）中文版》作为计算机科学的经典著作，讲解了包含结构化代码和自顶向下设计在内的程序设计原则。与以前的版本一样，作者的目标仍旧是为读者提供一本入门型、条理清晰、见解深刻的C语言教程。作者把基础的编程概念与C语言的细节很好地融合在一起，并通过大量短小精悍的示例同时演示一两个概念，通过学以致用的方式鼓励读者掌握新的主题。每章末尾的复习题和编程练习题进一步强化了重要的信息，有助于读者理解和消化那些难以理解的概念。本书采用了友好、易于使用的编排方式，不仅适合打算认真学习C语言编程的学生阅读，也适合那些精通其他编程语言，但希望",
                  "press": "人民邮电出版社",
                  "publish_date": "2016-04-01 00:00:00",
                  "size": "16开",
                  "version": null,
                  "author": "[美]史蒂芬・普拉达（Stephen Prata）",
                  "translator": null,
                  "isbn": "9787115390592",
                  "price": 79.2,
                  "pages": 0,
                  "catalog": "",
                  "market_price": 89.0,
                  "member_price": 0.0,
                  "deal_mount": 100,
                  "look_mount": 130,
                  "discount": 8.9,
                  "image_url": "http://img3m2.ddimg.cn/43/13/23958142-1_b_12.jpg",
                  "store_mount": 200,
                  "store_time": "2018-11-01T19:58:44.000+00:00",
                  "pack_style": "平装-胶订",
                  "is_shelf": 1,
                  "cname": "",
                  "description": "",
                  "cata": "",
                  "content": ""
              }
          ],
          "list_size": 2
      }
  }
  ```

  - 失败

  ```json
  {
      "code":0,
      "message":"fail",
      "data":{}
  }
  ```



### 获取图书平均评分和评分人数

​	根据book_id获取平均评分，如果该书还未有评分的，会返回“null”

- 接口：/book/getBookAverageRating

- 接收参数：

  - book_id

- 返回值：

  - 成功

  ```json
  // 还未有评分时
  {
      "code": 1,
      "message": "success",
      "data": {
          "number": 0,
          "avg_rating": "null"
      }
  }
  
  // 有评分时
  {
      "code": 1,
      "message": "success",
      "data": {
          "number": 12,
          "avg_rating": 7.5000
      }
  }
  ```

  - 失败

  ```json
  {
      "code": 0,
      "message": "fail",
      "data": {}
  }
  ```



### 获取平均评分排名图书和评分人数

​	讲图书列表根据平均评分进行排名，返回所需区间的图书和排名情况。为了防止评论人数过少导致评分过大过小，我决定过滤掉评论人数小于10的图书。此处只返回图书的book_id、name、author、image_url，图书的排名，评分、评分人数。

​	如果某记录的某字段没有的话，该字段就不返回。另外，图书排名的顺序就是列表的顺序。

- 接口：/book/getBookRankListByRatingWithLimit

- 接收参数：

  - left
  - right

- 返回值：

  - 成功

  ```json
  {
      "code": 1,
      "message": "success",
      "data": {
          "list_size": 3,
          "rank_list": [
              {
                  "number": 10,
                  "author": "Dr. Seuss",
                  "image_url": "http://images.amazon.com/images/P/0394800893.01.MZZZZZZZ.jpg",
                  "name": "The Sneetches and Other Stories",
                  "rating": 9.6000,
                  "book_id": 394800893
              },
              {
                  "number": 11,
                  "author": "Valerie Ann Worwood",
                  "image_url": "http://images.amazon.com/images/P/0931432820.01.MZZZZZZZ.jpg",
                  "name": "The Complete Book of Essential Oils and Aromatherapy",
                  "rating": 9.3636,
                  "book_id": 931432820
              },
              {
                  "number": 13,
                  "author": "Martha Sears",
                  "name": "The Baby Book: Everything You Need to Know About Your Baby from Birth to Age Two",
                  "rating": 9.2308,
                  "book_id": 316779059
              }
          ]
      }
  }
  ```

  - 失败

  ```json
  {
      "code": 0,
      "message": "fail",
      "data": {}
  }
  ```



### 获取订单列表

​	此处获取的订单列表，是根据user_id获取订单信息，订单内包含的商品信息和快递信息，需要另外调用接口进行获取。

​	订单这一块，很多人只有一两个订单或者甚至没有

- 接口：/order/getUserOrderListWithLimit

- 接收参数：

  - user_id
  - left
  - right

- 返回值：

  - 成功

  ```json
  {
      "code": 1,
      "message": "success",
      "data": {
          "list_size": 1,
          "order_list": [
              {
                  "order_id": "10000002",
                  "user_id": 162756,
                  "payment": "117",
                  "payment_type": 0,
                  "status": 0,
                  "post_fee": null,
                  "create_time": "2017-04-24T05:00:00.000+00:00",
                  "update_time": "2017-04-24T05:00:00.000+00:00",
                  "order_mount": 0,
                  "payment_time": null,
                  "end_time": null,
                  "shipping_name": null,
                  "shipping_code": null,
                  "buyer_message": null,
                  "buyer_rate": 0
              }
          ]
      }
  }
  ```
  
  - 失败
  
  ```json
  {
      "code": 0,
    "message": "fail",
      "data": {}
}
  ```



### 获取订单的详情

​	即获取订单内图书的购买信息

- 接口：/order/getOrderDetailListByOrderId

- 接收参数：

  - order_id

- 返回值：

  - 成功

  ```json
  {
      "code": 1,
      "message": "success",
      "data": {
          "detail_list": [
              {
                  "order_detail_id": 7,
                  "order_number": null,
                  "order_id": "10000135",
                  "book_id": 316514373,
                  "store_id": 7,
                  "mount": 1,
                  "unit_price": 114.0,
                  "total_price": 114.0,
                  "post_status": null,
                  "deliver_time": null,
                  "receive_status": null,
                  "image_url": null,
                  "book_name": "The writing process: A concise rhetoric",
                  "score": "8"
              },
              {
                  "order_detail_id": 8,
                  "order_number": null,
                  "order_id": "10000135",
                  "book_id": 345322932,
                  "store_id": 1,
                  "mount": 1,
                  "unit_price": 144.0,
                  "total_price": 144.0,
                  "post_status": null,
                  "deliver_time": null,
                  "receive_status": null,
                  "image_url": "http://images.amazon.com/images/P/0345322932.01.MZZZZZZZ.jpg",
                  "book_name": "Living Through Personal Crisis",
                  "score": "1"
              },
              {
                  "order_detail_id": 18,
                  "order_number": null,
                  "order_id": "10000135",
                  "book_id": 316514373,
                  "store_id": 7,
                  "mount": 1,
                  "unit_price": 114.0,
                  "total_price": 114.0,
                  "post_status": null,
                  "deliver_time": null,
                  "receive_status": null,
                  "image_url": null,
                  "book_name": "The writing process: A concise rhetoric",
                  "score": "8"
              },
              {
                  "order_detail_id": 19,
                  "order_number": null,
                  "order_id": "10000135",
                  "book_id": 345322932,
                  "store_id": 1,
                  "mount": 1,
                  "unit_price": 144.0,
                  "total_price": 144.0,
                  "post_status": null,
                  "deliver_time": null,
                  "receive_status": null,
                  "image_url": "http://images.amazon.com/images/P/0345322932.01.MZZZZZZZ.jpg",
                  "book_name": "Living Through Personal Crisis",
                  "score": "1"
              }
          ],
          "list_size": 4
      }
  }
  ```

  - 失败

  ```json
  {
      "code": 0,
      "message": "fail",
      "data": {}
  }
  ```





### 根据订单号获取快递信息

- 接口：/order/getOrderShipping

- 参数：

  - order_id

- 返回值：

  - 成功：

  ```json
  {
      "code": 1,
      "message": "success",
      "data": {
          "order_shipping": {
              "order_id": "1384790539875092",
              "receiver_name": "gaolei",
              "receiver_phone": null,
              "receiver_mobile": "",
              "receiver_state": "广东",
              "receiver_city": "广州",
              "receiver_district": "海珠区",
              "receiver_address": "",
              "receiver_zip": null,
              "created": "2019-06-12T19:52:34.000+00:00",
              "updated": "2019-06-12T19:52:34.000+00:00"
          }
      }
  }
  ```

  - 失败

  ```json
  {
      "code":0,
      "message":"fail",
      "data":{}
  }
  ```



### 根据图书ID获取图书详细信息

​	因为订单详情中图书的信息不够完整，现在提供一个接口用于根据图书ID获取完整的图书信息

- 接口：/book/getBookInfoByBookId

- 参数：

  - book_id

- 返回值：

  - 成功：

  ```json
  {
      "code": 1,
      "message": "success",
      "data": {
          "book_info": {
              "book_id": 316514373,
              "book_category_id": 4,
              "store_id": 7,
              "name": "The writing process: A concise rhetoric",
              "outline": null,
              "detail": null,
              "press": "Little",
              "publish_date": "1983",
              "size": null,
              "version": null,
              "author": "John M Lannon",
              "translator": null,
              "isbn": null,
              "price": 114.0,
              "pages": 0,
              "catalog": null,
              "market_price": 0.0,
              "member_price": 0.0,
              "deal_mount": 0,
              "look_mount": 0,
              "discount": 0.0,
              "image_url": null,
              "store_mount": 200,
              "store_time": null,
              "pack_style": null,
              "is_shelf": 1,
              "cname": "Military Science",
              "description": "No content",
              "cata": "No content",
              "content": "No content"
          }
      }
  }
  ```

  - 失败

  ```json
  {
      "code":0,
      "message":"fail",
      "data":{}
  }
  ```



### 查看用户的购物车

​	获取用户的购物车列表，包括书的id、数量、单价。书的总价需要自行计算，购物车的总价也需自行计算。

- 接口：/shopping_car/getUserCarInfo

- 参数：

  - user_id

- 返回值：

  - 成功：

  ```json
  {
      "code": 1,
      "message": "success",
      "data": {
          "list_size": 1,
          "car_list": [
              {
                  "user_id": 2,
                  "book_id": 1,
                  "amount": 1,
                  "unit_price": 61.5
              }
          ]
      }
  ```

  - 失败

  ```json
  {
      "code":0,
      "message":"fail",
      "data":{}
  }
  ```



### 向购物车添加书或修改图书数量

​	增加和修改都用此接口。

​	往购物车里面添加书籍，需要提供user_id，book_id和amount，以及unit_price。我后台就不判断了，你们前面保证unit_price要和book_id的书的单价对应。

- 接口：/shopping_car/addBook

- 参数：

  - user_id
  - book_id
  - amount
  - unit_price

- 返回值：

  - 成功：

  ```json
  {
      "code": 1,
      "message": "success",
      "data": {}
  }
  ```

  - 失败

  ```json
  {
      "code":0,
      "message":"fail",
      "data":{}
  }
  ```



### 从购物车删除书

​	往购物车里面删除书籍，需要提供user_id，book_id

- 接口：/shopping_car/deleteBook

- 参数：

  - user_id
  - book_id

- 返回值：

  - 成功：

  ```json
  {
      "code": 1,
      "message": "success",
      "data": {}
  }
  ```

  - 失败

  ```json
  {
      "code":0,
      "message":"fail",
      "data":{}
  }
  ```



### 清空购物车

​	需要提供user_id

- 接口：/shopping_car/clearCar

- 参数：

  - user_id

- 返回值：

  - 成功：

  ```json
  {
      "code": 1,
      "message": "success",
      "data": {}
  }
  ```

  - 失败

  ```json
  {
      "code":0,
      "message":"fail",
      "data":{}
  }
  ```



### 将购物车提交订单

​	后台接收请求后，会根据数据库中购物车的内容生成订单，并清空购物车。最后返回订单号和总金额。

- 接口：/shopping_car/toOrder

- 参数：

  - user_id

- 返回值：

  - 成功：

  ```json
  {
      "code": 1,
      "message": "success",
      "data": {
          "total_price": 201.2,
          "order_id": 79066032628236820
      }
  }
  ```

  - 失败

  ```json
  {
      "code":0,
      "message":"fail",
      "data":{}
  }
  ```



### 订单付款，填写收货信息

​	付款就不真的实现了，做一个demo吧。后台根据order_id和收货信息填写数据库。

- 接口：/shopping_car/setOrderShipping

- 参数：以JSON格式回传

  - order_id
  - receiver_name
  - receiver_phone
  - receiver_mobile
  - receiver_state：收货者的省份
  - receiver_city
  - receiver_district
  - receiver_address
  - receiver_zip

- 返回值：

  - 成功：

  ```json
  {
      "code": 1,
      "message": "success",
      "data": {}
  }
  ```

  - 失败

  ```json
  {
      "code":0,
      "message":"fail",
      "data":{}
  }
  ```

